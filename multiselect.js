document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll("select[multiple]").forEach(e=>{let t=e.id,l=e.className,o=e.getAttribute("style"),i=e.parentNode,n=[];for(let r=0;r<e.options.length;r++){let s={value:e.options[r].value,text:e.options[r].innerHTML};n.push(s)}e.remove();let a=document.createElement("div");a.classList="multipleSelect "+l,a.style=o;let c=document.createElement("option");c.id=t,c.classList="first",c.value="[]",a.appendChild(c);let p=document.createElement("option");p.classList="optionText",p.value="[]",p.hidden=!0,a.appendChild(p);let u=document.createElement("div");u.id="options";for(let d=0;d<n.length;d++){let y=document.createElement("option");n[d].value!=n[d].innerHTML&&(y.value=n[d].value),y.innerHTML=n[d].text,u.appendChild(y)}a.appendChild(u),i.appendChild(a)}),document.addEventListener("click",function(e){0>e.path.indexOf(document.querySelector(".multipleSelect"))&&(document.querySelector("#options").style.display="none",document.querySelector(".first").classList.remove("open"))}),document.querySelector(".first").addEventListener("click",function(){"block"==document.querySelector("#options").style.display?(document.querySelector("#options").style.display="none",this.classList.remove("open")):(document.querySelector("#options").style.display="block",this.classList.add("open"))}),document.querySelectorAll("#options > option").forEach(e=>{e.addEventListener("click",function(){let e=0;"rgb(2, 100, 174)"==this.style.backgroundColor?(this.style.backgroundColor="",this.style.color=""):(this.style.backgroundColor="rgb(2, 100, 174)",this.style.color="white",e=1);let t="",l=JSON.parse(document.querySelector(".optionText").value),o=JSON.parse(document.querySelector(".first").value),i=o.length;for(let n=0;n<o.length;n++)o[n]==this.value&&(i=n);e?(o[i]=this.value,l[i]=this.textContent):(o.splice(i,1),l.splice(i,1));for(let r=0;r<l.length;r++){if(r>1){t+=", "+l[r]+" ...";break}t+=0==r?l[r]:", "+l[r]}document.querySelector(".first").textContent=t,document.querySelector(".first").value=JSON.stringify(o),document.querySelector(".optionText").value=JSON.stringify(l),document.querySelector(".first").dispatchEvent(new Event("change"))})})});